<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <title>Coop Lager og CoopGo – Interaktiv</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background-color: #f0f0f0; }
        input[type="number"] { margin: 5px; }
        label { font-weight: bold; margin-right: 10px; }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .venstre {
            flex: 1 1 50%;
            min-width: 300px;
        }
        .hoyre {
            flex: 1 1 50%;
            min-width: 300px;
        }
        .filter-container {
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>

<h1>Coop Lager og CoopGo – Interaktiv Oversikt</h1>

<div class="container">
    <!-- Kart i venstre kolonne -->
    <div class="venstre">
        <iframe src="coop_lagerkart_oppdatert.html" width="100%" height="600" style="border:none;"></iframe>
    </div>

    <!-- Tabeller og filter i høyre kolonne -->
    <div class="hoyre">
        <div class="filter-container">
            <label for="prosent">Prosentandel (f.eks. 5):</label>
            <input type="number" id="prosent" value="5" min="1"> %

            <label for="kr">Verdi per kunde:</label>
            <input type="number" id="kr" value="500" min="100"> kr
        </div>

        <div id="tabeller"></div>
    </div>
</div>

<script>
// Data for lagerlokasjoner
const lagerData = [
    { navn: "C-Log (Gardermoen)", adresse: "Vilbergvegen 130, 2067 Jessheim", adt: "50 000" },
    { navn: "Langhus (Viken)", adresse: "Regnbueveien 5, 1405 Langhus", adt: "40 000" },
    { navn: "Trondheim Regionlager", adresse: "Østre Rosten 108, 7075 Tiller", adt: "27 500" },
    { navn: "Stavanger Regionlager", adresse: "Nesflåtveien 4, 4018 Stavanger", adt: "22 500" },
    { navn: "Bergen Regionlager", adresse: "Sandbrekkevegen 81, 5225 Nesttun", adt: "32 500" },
    { navn: "Tromsø Regionlager", adresse: "Ringvegen 770, 9015 Tromsø", adt: "17 500" },
];

// Data for foreslåtte CoopGo-stasjoner
const coopgoData = [
    { navn: "E6 Alnabru, Oslo", adt: "100 000" },
    { navn: "E18 Lysaker, Bærum", adt: "90 000" },
    { navn: "Ring 3 Ryen-krysset, Oslo", adt: "70 700" },
    { navn: "E6 Sluppen, Trondheim", adt: "47 500" },
    { navn: "E39 Forus, Stavanger", adt: "57 000" },
    { navn: "E39 Lagunen, Bergen", adt: "Ukjent" },
];

// Formatering av beløp (to desimaler + tusenskiller)
function formater(kr) {
    return kr.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + " kr";
}

// Formatering av antall kunder (ingen desimaler + tusenskiller)
function formaterAntall(verdi) {
    return Math.round(verdi).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
}

// Funksjon for å vise tabellene
function visTabeller() {
    const prosent = parseFloat(document.getElementById("prosent").value) || 0;
    const kr = parseFloat(document.getElementById("kr").value) || 0;

    let html = "<h2>Coop Lagerlokasjoner</h2><table><tr><th>Navn</th><th>Adresse</th><th>ÅDT</th><th>Antall kunder (ÅDT × prosent)</th><th>Inntjening: ÅDT × prosent × kr</th></tr>";
    
    lagerData.forEach(item => {
        const adt = parseInt(item.adt.replace(/\s/g, ""));
        const antallKunder = adt * (prosent / 100);
        const inntjening = antallKunder * kr;
        html += `<tr>
                    <td>${item.navn}</td>
                    <td>${item.adresse}</td>
                    <td>${item.adt}</td>
                    <td>${formaterAntall(antallKunder)}</td>
                    <td>${formater(inntjening)}</td>
                </tr>`;
    });
    html += "</table>";

    html += "<h2>Ønskede CoopGo-stasjoner</h2><table><tr><th>Navn</th><th>ÅDT</th><th>Antall kunder (ÅDT × prosent)</th><th>Inntjening: ÅDT × prosent × kr</th></tr>";

    coopgoData.forEach(item => {
        if (item.adt === "Ukjent") {
            html += `<tr><td>${item.navn}</td><td>Ukjent</td><td>Estimert</td><td>Estimert</td></tr>`;
        } else {
            const adt = parseInt(item.adt.replace(/\s/g, ""));
            const antallKunder = adt * (prosent / 100);
            const inntjening = antallKunder * kr;
            html += `<tr>
                        <td>${item.navn}</td>
                        <td>${item.adt}</td>
                        <td>${formaterAntall(antallKunder)}</td>
                        <td>${formater(inntjening)}</td>
                    </tr>`;
        }
    });
    html += "</table>";

    document.getElementById("tabeller").innerHTML = html;
}

// Oppdater tabeller når input endres
document.getElementById("prosent").addEventListener("input", visTabeller);
document.getElementById("kr").addEventListener("input", visTabeller);

// Initielt kall for å vise tabeller
visTabeller();
</script>

</body>
</html>
